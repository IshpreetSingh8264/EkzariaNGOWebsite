import{j as e,r as h}from"./index-CU3-zU2J.js";import{F as v,a as w,b as C,c as S}from"./AdminPage-BNimEilL.js";import{m as E}from"./proxy-lScpp-St.js";import"./LoadingScreen-Chi4SEHt.js";const F=({verified:s})=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s?e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"-ml-0.5 mr-1.5 h-2 w-2 text-green-400",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),"Verified"]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"-ml-0.5 mr-1.5 h-2 w-2 text-red-400",fill:"currentColor",viewBox:"0 0 8 8",children:e.jsx("circle",{cx:"4",cy:"4",r:"3"})}),"Not Verified"]})}),k=({student:s,editingId:n,onEdit:t,onDelete:r,onVerify:o,onView:a})=>e.jsx("div",{className:"flex space-x-2",children:n!==s.id&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>a(s),className:"p-2 text-[#1976D2] hover:bg-[#E3F2FD] rounded-full transition-colors",title:"View Details",children:e.jsx(v,{size:16})}),e.jsx("button",{onClick:()=>t(s),className:"p-2 text-[#FFA000] hover:bg-[#FFF3E0] rounded-full transition-colors",title:"Edit",children:e.jsx(w,{size:16})}),!s.verified&&e.jsx("button",{onClick:()=>o(s.id),className:"p-2 text-[#388E3C] hover:bg-[#E8F5E9] rounded-full transition-colors",title:"Verify",children:e.jsx(C,{size:16})}),e.jsx("button",{onClick:()=>{window.confirm("Are you sure you want to delete this student?")&&r(s.id)},className:"p-2 text-[#D32F2F] hover:bg-[#FFEBEE] rounded-full transition-colors",title:"Delete",children:e.jsx(S,{size:16})})]})}),A=({students:s,editingId:n,editForm:t,setEditForm:r,onEdit:o,onDelete:a,onVerify:x,onView:c})=>e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("table",{className:"w-full divide-y divide-[#E0E0E0] min-w-[600px]",children:[e.jsx("thead",{className:"bg-[#FBE9E7]",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-2 sm:px-4 md:px-6 py-3 text-left text-xs sm:text-sm font-medium text-[#424242] uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"px-2 sm:px-4 md:px-6 py-3 text-left text-xs sm:text-sm font-medium text-[#424242] uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-2 sm:px-4 md:px-6 py-3 text-left text-xs sm:text-sm font-medium text-[#424242] uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-2 sm:px-4 md:px-6 py-3 text-left text-xs sm:text-sm font-medium text-[#424242] uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-[#E0E0E0]",children:s.length>0?s.map(i=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-2 sm:px-4 md:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-[#424242]",children:n===i.id?e.jsx("input",{type:"text",value:t.name,onChange:m=>r({...t,name:m.target.value}),className:"border rounded p-1 w-full"}):i.name}),e.jsx("td",{className:"px-2 sm:px-4 md:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-[#424242]",children:n===i.id?e.jsx("input",{type:"email",value:t.email,onChange:m=>r({...t,email:m.target.value}),className:"border rounded p-1 w-full"}):i.email}),e.jsx("td",{className:"px-2 sm:px-4 md:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-[#424242]",children:e.jsx(F,{verified:i.verified})}),e.jsx("td",{className:"px-2 sm:px-4 md:px-6 py-4 whitespace-nowrap text-xs sm:text-sm text-[#424242]",children:e.jsx(k,{student:i,editingId:n,onEdit:o,onDelete:a,onVerify:x,onView:c})})]},i.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"px-2 sm:px-4 md:px-6 py-4 text-center text-xs sm:text-sm text-[#757575]",children:"No student records found"})})})]})}),I=({formData:s,setFormData:n,showPersonalInfo:t,showEducationInfo:r,showFinancialInfo:o})=>{const a=x=>{const{name:c,value:i}=x.target;n(m=>({...m,[c]:i}))};return e.jsxs("div",{className:"space-y-6",children:[t&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Personal Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Profile Photo"}),s.photo&&e.jsx("div",{className:"mb-3",children:e.jsx("img",{src:s.photo,alt:"Profile Preview",className:"h-24 w-24 rounded-full object-cover border-2 border-gray-300"})}),e.jsx("input",{type:"file",accept:"image/*",onChange:x=>{const c=x.target.files[0];if(c){const i=new FileReader;i.onloadend=()=>{n(m=>({...m,photo:i.result}))},i.readAsDataURL(c)}},className:`w-full text-sm text-gray-500\r
                  file:mr-4 file:py-2 file:px-4\r
                  file:rounded-md file:border-0\r
                  file:text-sm file:font-semibold\r
                  file:bg-[#C62828] file:text-white\r
                  hover:file:bg-[#8E0000]`})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),e.jsx("input",{type:"text",name:"name",value:s.name,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),e.jsx("input",{type:"email",name:"email",value:s.email,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Gender"}),e.jsxs("select",{name:"gender",value:s.gender,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]",children:[e.jsx("option",{value:"",children:"Select Gender"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Other",children:"Other"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),e.jsx("input",{type:"tel",name:"phone",value:s.phone,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),e.jsx("input",{type:"text",name:"location",value:s.location,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nationality"}),e.jsx("input",{type:"text",name:"nationality",value:s.nationality,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]})]})]}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Education Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Education Level"}),e.jsxs("select",{name:"educationLevel",value:s.educationLevel,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]",children:[e.jsx("option",{value:"",children:"Select Education Level"}),e.jsx("option",{value:"High School",children:"High School"}),e.jsx("option",{value:"Undergraduate",children:"Undergraduate"}),e.jsx("option",{value:"Graduate",children:"Graduate"}),e.jsx("option",{value:"PhD",children:"PhD"}),e.jsx("option",{value:"Vocational",children:"Vocational"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Institution"}),e.jsx("input",{type:"text",name:"institution",value:s.institution,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Field of Study"}),e.jsx("input",{type:"text",name:"fieldOfStudy",value:s.fieldOfStudy,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Achievements"}),e.jsx("textarea",{name:"achievements",value:s.achievements,onChange:a,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]})]})]}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Financial Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Amount Needed ($)"}),e.jsx("input",{type:"number",name:"totalAmountNeeded",value:s.totalAmountNeeded,onChange:a,min:"0",className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funding Deadline"}),e.jsx("input",{type:"date",name:"fundingDeadline",value:s.fundingDeadline,onChange:a,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Funding Needs"}),e.jsx("textarea",{name:"fundingNeeds",value:s.fundingNeeds,onChange:a,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Reason for Financial Help"}),e.jsx("textarea",{name:"financialHelpReason",value:s.financialHelpReason,onChange:a,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-[#C62828] focus:border-[#C62828]"})]})]})]})]})},P=({editForm:s,setEditForm:n,onSave:t,onClose:r})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:e.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden max-w-4xl w-full max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6 md:p-8",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Edit Student Details"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700 text-2xl",children:"×"})]}),e.jsx(I,{formData:s,setFormData:n,showPersonalInfo:!0,showEducationInfo:!0,showFinancialInfo:!0}),e.jsxs("div",{className:"mt-6 flex justify-between items-center",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"verified",checked:s.verified||!1,onChange:o=>n({...s,verified:o.target.checked}),className:"h-4 w-4 text-[#43A047] rounded border-gray-300 focus:ring-[#43A047]"}),e.jsx("label",{htmlFor:"verified",className:"ml-2 block text-sm text-gray-700",children:"Verify Applicant"})]}),e.jsx("button",{onClick:t,className:"px-6 py-2 bg-[#43A047] text-white rounded-md hover:bg-[#2E7D32] transition-colors",children:"Save Changes"})]})]})})}),O=({student:s,onClose:n})=>e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 overflow-y-auto",children:e.jsx("div",{className:"flex items-center justify-center min-h-screen p-2 sm:p-4",children:e.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-y-auto max-w-4xl w-full mx-2 sm:mx-4 my-4 max-h-[90vh] relative",children:[e.jsx("button",{onClick:n,className:"absolute top-6 left-6 w-8 h-8 flex items-center justify-center rounded-full bg-gray-100 hover:bg-gray-200 text-gray-700 text-xl",children:"×"}),e.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start gap-3 sm:gap-4 mb-3 sm:mb-6",children:[e.jsxs("div",{className:"w-full sm:w-auto flex flex-col items-center sm:items-start sm:flex-row gap-2 sm:gap-4",children:[s.photo&&e.jsx("div",{className:"w-32 h-32 sm:w-36 sm:h-36 md:w-40 md:h-40 rounded-full overflow-hidden border-2 border-gray-200",children:e.jsx("img",{src:s.photo.startsWith("data:image")?s.photo:`data:image/jpeg;base64,${s.photo}`,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-gray-900",children:s.name}),e.jsx("span",{className:`text-sm px-2 py-1 rounded ${s.verified?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:s.verified?"Verified":"Not Verified"})]}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-600",children:s.institution})]})]}),e.jsxs("div",{className:"w-full sm:w-auto mt-24 sm:mt-12",children:[e.jsxs("div",{className:"flex justify-between mb-1",children:[e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:["Funding Progress: $",s.fundsReceived||0," of $",s.totalAmountNeeded]}),e.jsxs("span",{className:"text-xs sm:text-sm font-medium text-gray-700",children:[Math.round((s.fundsReceived||0)/s.totalAmountNeeded*100),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 sm:h-2.5",children:e.jsx("div",{className:"bg-[#C62828] h-2.5 rounded-full",style:{width:`${Math.min(100,(s.fundsReceived||0)/s.totalAmountNeeded*100)}%`,transition:"width 0.3s ease-in-out"}})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 sm:gap-6 md:gap-8",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800 border-b pb-1 sm:pb-2",children:"Personal Information"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Gender:"})," ",s.gender||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Email:"})," ",s.email]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Phone:"})," ",s.phone||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Address:"})," ",s.location||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Nationality:"})," ",s.nationality||"N/A"]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800 border-b pb-1 sm:pb-2",children:"Education Background"}),e.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Education Level:"})," ",s.educationLevel||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Institution:"})," ",s.institution||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Field of Study:"})," ",s.fieldOfStudy||"N/A"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Achievements:"})," ",s.achievements||"N/A"]})]})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-3 sm:mb-4 text-gray-800 border-b pb-1 sm:pb-2",children:"Financial Need"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Amount Needed:"})," $",s.totalAmountNeeded||"0"]}),e.jsxs("p",{children:[e.jsx("span",{className:"font-medium",children:"Deadline:"})," ",s.fundingDeadline||"N/A"]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:"Funding Needs:"}),e.jsx("p",{className:"text-gray-700",children:s.fundingNeeds||"N/A"}),e.jsx("h4",{className:"font-medium mt-3",children:"Reason for Financial Help:"}),e.jsx("p",{className:"text-gray-700",children:s.financialHelpReason||"N/A"})]})]})]})]})]})]})})}),J=()=>{const[s,n]=h.useState([]),[t,r]=h.useState(null),[o,a]=h.useState({}),[x,c]=h.useState(null);h.useEffect(()=>{const l=()=>{let d=JSON.parse(localStorage.getItem("needyStudents")||"[]"),g=[...JSON.parse(localStorage.getItem("needyPersons")||"[]"),...d].filter((j,b,N)=>b===N.findIndex(y=>y.id===j.id));n(g)};return l(),window.addEventListener("storage",l),()=>window.removeEventListener("storage",l)},[]);const i=l=>{const d=s.filter(u=>u.id!==l);n(d),localStorage.setItem("needyPersons",JSON.stringify(d)),localStorage.setItem("needyStudents",JSON.stringify(d))},m=l=>{const d=s.map(u=>u.id===l?{...u,verified:!0}:u);n(d),localStorage.setItem("needyPersons",JSON.stringify(d)),localStorage.setItem("needyStudents",JSON.stringify(d))},p=l=>{r(l.id),a({...l,name:l.name||"",email:l.email||"",gender:l.gender||"",phone:l.phone||"",location:l.location||"",nationality:l.nationality||"",educationLevel:l.educationLevel||"",institution:l.institution||"",fieldOfStudy:l.fieldOfStudy||"",achievements:l.achievements||"",totalAmountNeeded:l.totalAmountNeeded||0,fundingDeadline:l.fundingDeadline||"",fundingNeeds:l.fundingNeeds||"",financialHelpReason:l.financialHelpReason||""})},f=()=>{const l=s.map(d=>d.id===t?{...d,...o}:d);n(l),localStorage.setItem("needyPersons",JSON.stringify(l)),localStorage.setItem("needyStudents",JSON.stringify(l)),r(null)};return e.jsxs(E.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"bg-[#FFFFFF] rounded-lg shadow p-4 md:p-6 w-full max-w-screen-2xl mx-auto overflow-x-auto",children:[e.jsx("h2",{className:"text-xl md:text-2xl font-bold text-[#212121] mb-4 md:mb-6",children:"Application Details"}),e.jsx(A,{students:s,editingId:t,editForm:o,setEditForm:a,onEdit:p,onDelete:i,onVerify:m,onView:c}),t&&e.jsx(P,{editForm:o,setEditForm:a,onSave:f,onClose:()=>r(null)}),x&&!t&&e.jsx(O,{student:x,onClose:()=>c(null)})]})};export{J as default};
